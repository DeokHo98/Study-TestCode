# 테스트 코드란   
테스트는 코드의 일부를 테스트하기 위해 작성되는 매우작고 독립정인 방법이다.   
swift로 작성된 함수를 테스트하며 이 함수가 예상대로 작동하는지 확윈하기 위해 작성한다.   
유효한 파라미터로 함수를 테스트하기도하며 잘못된 파라미터로 함수를 테스트하기도 한다. 그리고 두 시나리오 모두에서 유닛테스트 메서드가 기능을 식별한다.      
테스트는 절대 복잡하지않고 아주 간단하게 작생되어야 한다.   
꼭꼭꼭!! 하나의 특정기능을 테스트해야함을 명심해야한다.     
테스트 시나리오 역시 예를들어 잘못된입력을받는 테스트, 맞는입력을받는 테스트 , 잘못된서버연결테스트 등 각각 단위로 진행한다.   
서버에서 받아오는 데이터가 아닌 더미데이터로 대체한다. 그이유는 빠르게작동하게 하기위해서이다.   


# 테스트 피라미드
![1_6M7_pT_2HJR-o-AXgkHU0g](https://user-images.githubusercontent.com/93653997/168221847-85f77cb4-dcfc-4145-94d6-2d918350613e.jpeg)

테스트과정은 피라미드 구조로 되어있는데.   
맨 아래엔 있는건 유닛테스트다.   
일반적으로 유닛테스트가 다른 테스트 코드보다 먼저 작동되기 때문이다. 또한 일반적으로 더 많은 테스트를 해야하기때문이다.   
단위테스트는 가장빠르다.   
그 이유는 데이터베이스나 서버에 실제 요청을 보내지 않기때문이다. 가짜 모의 객체를 사용한다.   
이것은 테스트하고있는 함수를 어떤것의 의존성에서 분리시키는것이기도 하다. (의존성 분리?, 종속성 분리?)   
   
      
그 위에있는것이 통합테스트이다.   
이테스트는 가짜 모의 객체를 사용하는 유닛테스트와 달리 실제 객체를 사용한다.   
실제 있는 객체를 사용하며 서버나 데이터베이스에 실제로 요청을 보낸다.   
이 테스트를 동과한다면 테스트중인 기능이 다른 외부시스템과 잘 작동한다는 뜻이기도하다.   
통합테스트는 외부시스템과 통신해야하기때문에 단위테스트보다 느리게 실행된다.   
   
      
마지막으로 맨위에있는것이 UI테스트이다.   
행동을 시뮬레이션하는 테스트이며 사용자를 대신해 테스트를 할 수 있다.
예를들어 텍스트필드에 사용자가 입력을하고 버튼을누른뒤 예상 결과를 기다릴때   
올바른경우 화면이넘어가고 아닌경우 경고메세지가 나온다면 이것을 직접 눌러보는대신 테스트 해볼수 있다는것이다.   

# 유닛테스트 규칙 F.I.R.S.T
1. Fast: 유닛테스트는 빨라야한다. 원격서버나 테이터통신을 하지않고 하나의 특정작업만한다 그래서 매우 빨라야한다.   
   
2. independent: 유닛테스트는 독립적이어야한다. 한개의 단위테스트는 다른 단위에서 생성된 결과에 의존하면 안된다. 어디에도 종속되거나 의존되어서는 안된다.   
   
3. Repeatable: 유닛테스트는 반복가능해야한다. 여러번실행해도 같은 결과를 생성해야하며 어느컴퓨터에서도 같은 결과를 생성해야한다. 

4. Self - vaildating: 유닛테스트는 자체검증할수 있어야한다. 함수가 생성한결과를 실패했는지 성공했는지 자체 검증할수 있어야한다.

5. Thorough: 유닛테스트는 철저해야한다. 실패와 성공 모든 경우를 고려해야하며 모든걸 고려하기위해 여러 단위테스트를 구현해야한다. 또한 앱기능을 구현할때 단위테스트를 구현해야한다.
   


# 테스트 주도 개발
보통의 SW는 코드를 모두 작성한뒤 테스트를한다. ios에서는 코드를 작성한뒤에 시뮬레이터로 테스트를하는것처럼   
하지만 테스트 주도 개발은 코드를 쓰기전에 테스트를 먼저 진행하게된다.   
테스트를 먼저 만들고 테스트를 통과하기 위한 것을 짜는 것 즉, 만드는 과정에서 우선 테스트를 작성하고 그걸 통과하는 코드를 만들고를 반복하면서 제대로 동작하는지에 대한 피드백을 적극적으로 받는 것이다. 
   


# 테스트 주도 개발 수명주기 (Red -> Green -> Refactor -> Repeat)
1. Red: 코드를 작성하기전에 작성하며 이 단계에선 실패하는 코드를 작성한다.   
   
2. Grren: 실패한 테스트를 기반으로 통과할수 있는 코드를 작성해야한다.   
   
3. Refactor: 두 단위 테스트의 코드를 정리하고 검토하고 개선한다 예를들어 테스트메서드와 하드코딩된 변수 등이 제대로 구현되어있는지 등   
   
4. Repeat: 새로운 기능을 선택하고 이전 3단계를 반복하는것이다.   
   


# Xcode의 XCTest
XCTest에는 2가지 메서드가 있는데   
첫번째는 setUp()   
이 메서드는 테스트 케이스에서 각 테스트 메서드를 호출하기 전에 호출된다. 각 단위별로 호출되기 때문에   
예를들어 5개의 단위테스트가 모두 한개의 인스턴스만 쓴다면 여기서 인스턴스를 생성해서 사용하는것이다.  
    
두번째는 tearDown()   
이 메서드는 각 테스트 케이스가 끝날때 호출되는 메서드이다.   
앱상태를 초기상태로 복원할때 사용한다.   

두가지의 메서드 모두 테스트코드를 깨끗하고 유연하게 유지하는데 도움을 주는 메서드이다.    
이 두가지 메서드를 재정의하는 경우에 각 테스트 메서드가 몇개인지 상관없이 모두 딱 한번만 호출됩니다. 예)   
```swift
override class func setUp() {
    super.setUp()
}

override class func tearDown() {
    super.tearDown()
}
```

요약하면 인스턴스 메서드는 각 테스트마다 1번씩 호출 클래스 메서드는 무조건 1번만 호출    
   
tearDownWithError()    setUpWithError()라는 메서드도 있는데 위에 2개메서드에 에러를던질수있게 바뀐것이다.   
호출순서는 setupwithError -> setup -> tearDown -> tearDownWithError 순서다.   
   
추가적으로, 테스트 메서드 실행 중 addTeardownBlock(() -> Void) 메서드를 이용하여 teardown 코드 블록을 등록할 수 있다. 이 블록들은 해당 테스트 메서드가 끝난 후, teakDown() 인스턴스 메서드가 호출되기 전 last-in, first-out 순서로 호출된다.   